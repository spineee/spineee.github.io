<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>test</title>
</head>
<body>


    <script>
        async function getTabInfo() {
            const main = document.getElementById('main');
            const targetUrl = "http://127.0.0.1:9222/json";

            try {
                const response = await fetch(targetUrl);
                const tabs = await response.json();

                if (tabs.length === 0) {
                    main.innerHTML = '<p>未发现任何活跃的标签页。</p>';
                    return;
                }

                main.innerHTML = ''; // 清空加载提示
                tabs.forEach(tab => {
                    const div = document.createElement('div');
                    div.className = 'tab-item';
                    
                    // 仅输出核心元数据
                    div.innerHTML = `
                        <div class="title">${tab.title || '无标题'}</div>
                        <div class="url">URL: ${tab.url}</div>
                        <div class="ws">Debugger: ${tab.webSocketDebuggerUrl || '不可用'}</div>
                    `;
                    main.appendChild(div);
                });

            } catch (err) {
                main.innerHTML = `
                    <div class="error">
                        <strong>访问失败</strong><br>
                    </div>
                `;
            }
        }

        // 立即执行
        window.onload = getTabInfo;
    </script>
</body>
</html>
